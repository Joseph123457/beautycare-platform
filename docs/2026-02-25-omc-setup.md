# 작업 일지: 2026-02-25

## oh-my-claudecode (OMC) 초기 설정

### 개요
BeautyCare Platform 프로젝트에서 사용할 oh-my-claudecode 플러그인의 초기 설정을 완료했습니다.
글로벌 설정으로 구성하여 모든 프로젝트에서 동일하게 적용됩니다.

### 환경 정보

| 항목 | 값 |
|------|-----|
| OS | Windows 10 Pro (10.0.19045) |
| Shell | Git Bash (MINGW64) |
| Node.js | v24.13.0 |
| npm | v11.6.2 |

---

## 설정 흐름

```
Step 1  설정 위치 선택         → 글로벌 (~/.claude/CLAUDE.md)
Step 2  CLAUDE.md 다운로드      → GitHub에서 최신 버전 다운로드
Step 3  HUD 상태바 설정         → omc-hud.mjs 생성 + settings.json 연결
Step 3.5 OMC CLI 설치           → oh-my-claude-sisyphus v4.4.5
Step 4  플러그인 설치 확인       → oh-my-claudecode@omc v4.1.7 확인됨
Step 4.5 AST 도구 설치          → @ast-grep/napi v0.41.0
Step 5  MCP 서버                → 건너뜀
Step 5.5 Agent Teams 활성화     → 3 에이전트 / executor / opus
Step 6  2.x 업그레이드 확인     → 신규 설치 (이전 버전 없음)
```

---

## 완료된 작업 상세

### 1. OMC CLAUDE.md 다운로드 (글로벌)
- **위치:** `~/.claude/CLAUDE.md`
- **소스:** `https://raw.githubusercontent.com/Yeachan-Heo/oh-my-claudecode/main/docs/CLAUDE.md`
- 모든 Claude Code 세션에 자동 적용
- 매직 키워드, 자동 동작 규칙 포함

### 2. HUD 상태바 설정
- **스크립트:** `~/.claude/hud/omc-hud.mjs` (새로 생성)
- **동작:** 플러그인 캐시(v4.1.7) → 개발 경로 → 폴백 순서로 HUD 모듈 로드
- **settings.json:** `statusLine` 필드 추가 (type: command)
- Claude Code 재시작 후 상태바에 OMC 상태 표시

### 3. OMC CLI 설치
- **패키지:** `oh-my-claude-sisyphus@4.4.5`
- **설치 방법:** `npm install -g oh-my-claude-sisyphus`
- 사용 가능한 명령어:

| 명령어 | 설명 |
|--------|------|
| `omc` | 전체 대시보드 (stats + agents + cost) |
| `omc stats` | 토큰 사용량 및 비용 확인 |
| `omc agents` | 에이전트별 비용 분석 |
| `omc tui` | 인터랙티브 TUI 대시보드 |
| `omc backfill` | 과거 데이터 백필 |

### 4. 플러그인 설치 확인
- `oh-my-claudecode@omc` — settings.json에서 정상 확인됨
- 플러그인 캐시 버전: **4.1.7**

### 5. AST 도구 설치
- **패키지:** `@ast-grep/napi@0.41.0`
- **설치 방법:** `npm install -g @ast-grep/napi`
- 17개 언어 지원 (TypeScript, Python, Go, Rust, Java, C, C++ 등)

| 도구 | 설명 |
|------|------|
| `ast_grep_search` | 패턴 기반 AST 코드 검색 |
| `ast_grep_replace` | AST 기반 코드 변환 |

### 6. MCP 서버
- **선택:** 건너뜀
- 추후 `/oh-my-claudecode:mcp-setup`으로 설정 가능

### 7. Agent Teams 활성화
- `CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1` → settings.json에 추가

| 설정 | 값 |
|------|-----|
| 표시 모드 | Auto (tmux 시 분할 패널, 그 외 인프로세스) |
| 기본 에이전트 수 | 3 |
| 기본 타입 | executor |
| 기본 모델 | opus |
| 모니터 간격 | 30초 |
| 종료 타임아웃 | 15초 |

---

## 생성/수정된 파일

| 파일 | 상태 | 설명 |
|------|------|------|
| `~/.claude/CLAUDE.md` | 새로 생성 | OMC 글로벌 설정 (키워드, 자동 동작) |
| `~/.claude/settings.json` | 수정 | `statusLine` + `env.CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS` 추가 |
| `~/.claude/hud/omc-hud.mjs` | 새로 생성 | HUD 상태바 래퍼 스크립트 |
| `~/.claude/.omc-config.json` | 새로 생성 | Team 기본 설정값 |

### settings.json 최종 상태

```json
{
  "enabledPlugins": { "oh-my-claudecode@omc": true },
  "autoUpdatesChannel": "stable",
  "skipDangerousModePermissionPrompt": true,
  "statusLine": {
    "type": "command",
    "command": "node C:\\Users\\josep\\.claude\\hud\\omc-hud.mjs"
  },
  "env": {
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
  }
}
```

### .omc-config.json 최종 상태

```json
{
  "team": {
    "maxAgents": 3,
    "defaultAgentType": "executor",
    "defaultModel": "opus",
    "monitorIntervalMs": 30000,
    "shutdownTimeoutMs": 15000
  }
}
```

---

## 트러블슈팅 기록

### jq 미설치 이슈
- **문제:** `.omc-config.json` 작성 시 `jq` 명령어를 사용했으나 Windows 환경에 미설치
- **해결:** Write 도구로 JSON 파일을 직접 작성하여 우회
- **참고:** Windows Git Bash 환경에서는 `jq`가 기본 포함되지 않음

---

## 매직 키워드 요약

| 키워드 | 효과 | 예시 |
|--------|------|------|
| `ralph` | 지속 모드 (완료까지 반복) | "ralph: 인증 버그 수정해" |
| `ralplan` | 반복 플래닝 | "ralplan 이 기능 설계해" |
| `ulw` | 최대 병렬 처리 | "ulw API 리팩토링해" |
| `plan` | 플래닝 인터뷰 | "plan 새 엔드포인트 설계" |
| `team` | 팀 에이전트 | "/team 3:executor 오류 수정" |

> **참고:** `ralph`는 `ultrawork`를 자동 포함합니다. 별도로 조합할 필요 없습니다.

---

## 후속 작업

- [ ] Claude Code 재시작 (HUD 상태바 적용)
- [ ] 필요 시 MCP 서버 설정 (`/oh-my-claudecode:mcp-setup`)
- [ ] STEP13: 통계 대시보드 고도화 작업 진행
